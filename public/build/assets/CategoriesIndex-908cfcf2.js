import{r as b,o as O,a as y,c as m,b as A,F as T,d as j,u as l,t as R}from"./app-2662fdc7.js";class q extends Error{constructor(t,e,r){const o=t.status||t.status===0?t.status:"",n=t.statusText||"",a=`${o} ${n}`.trim(),i=a?`status code ${a}`:"an unknown error";super(`Request failed with ${i}`),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="HTTPError",this.response=t,this.request=e,this.options=r}}class C extends Error{constructor(t){super("Request timed out"),Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TimeoutError",this.request=t}}const p=s=>s!==null&&typeof s=="object",f=(...s)=>{for(const t of s)if((!p(t)||Array.isArray(t))&&typeof t<"u")throw new TypeError("The `options` argument must be an object");return g({},...s)},E=(s={},t={})=>{const e=new globalThis.Headers(s),r=t instanceof globalThis.Headers,o=new globalThis.Headers(t);for(const[n,a]of o.entries())r&&a==="undefined"||a===void 0?e.delete(n):e.set(n,a);return e},g=(...s)=>{let t={},e={};for(const r of s)if(Array.isArray(r))Array.isArray(t)||(t=[]),t=[...t,...r];else if(p(r)){for(let[o,n]of Object.entries(r))p(n)&&o in t&&(n=g(t[o],n)),t={...t,[o]:n};p(r.headers)&&(e=E(e,r.headers),t.headers=e)}return t},I=(()=>{let s=!1,t=!1;return typeof globalThis.ReadableStream=="function"&&(t=new globalThis.Request("https://a.com",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return s=!0,"half"}}).headers.has("Content-Type")),s&&!t})(),L=typeof globalThis.AbortController=="function",U=typeof globalThis.ReadableStream=="function",N=typeof globalThis.FormData=="function",S=["get","post","put","patch","head","delete"],B={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},_=2147483647,k=Symbol("stop"),M=s=>S.includes(s)?s.toUpperCase():s,D=["get","put","head","delete","options","trace"],F=[408,413,429,500,502,503,504],P=[413,429,503],x={limit:2,methods:D,statusCodes:F,afterStatusCodes:P,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY},H=(s={})=>{if(typeof s=="number")return{...x,limit:s};if(s.methods&&!Array.isArray(s.methods))throw new Error("retry.methods must be an array");if(s.statusCodes&&!Array.isArray(s.statusCodes))throw new Error("retry.statusCodes must be an array");return{...x,...s,afterStatusCodes:P}};async function $(s,t,e){return new Promise((r,o)=>{const n=setTimeout(()=>{t&&t.abort(),o(new C(s))},e.timeout);e.fetch(s).then(r).catch(o).then(()=>{clearTimeout(n)})})}const J=Boolean(globalThis.DOMException);function v(s){if(J)return new DOMException((s==null?void 0:s.reason)??"The operation was aborted.","AbortError");const t=new Error((s==null?void 0:s.reason)??"The operation was aborted.");return t.name="AbortError",t}async function z(s,{signal:t}){return new Promise((e,r)=>{if(t){if(t.aborted){r(v(t));return}t.addEventListener("abort",o,{once:!0})}function o(){r(v(t)),clearTimeout(n)}const n=setTimeout(()=>{t==null||t.removeEventListener("abort",o),e()},s)})}class d{static create(t,e){const r=new d(t,e),o=async()=>{if(r._options.timeout>_)throw new RangeError(`The \`timeout\` option cannot be greater than ${_}`);await Promise.resolve();let i=await r._fetch();for(const u of r._options.hooks.afterResponse){const h=await u(r.request,r._options,r._decorateResponse(i.clone()));h instanceof globalThis.Response&&(i=h)}if(r._decorateResponse(i),!i.ok&&r._options.throwHttpErrors){let u=new q(i,r.request,r._options);for(const h of r._options.hooks.beforeError)u=await h(u);throw u}if(r._options.onDownloadProgress){if(typeof r._options.onDownloadProgress!="function")throw new TypeError("The `onDownloadProgress` option must be a function");if(!U)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return r._stream(i.clone(),r._options.onDownloadProgress)}return i},a=r._options.retry.methods.includes(r.request.method.toLowerCase())?r._retry(o):o();for(const[i,u]of Object.entries(B))a[i]=async()=>{r.request.headers.set("accept",r.request.headers.get("accept")||u);const c=(await a).clone();if(i==="json"){if(c.status===204||(await c.clone().arrayBuffer()).byteLength===0)return"";if(e.parseJson)return e.parseJson(await c.text())}return c[i]()};return a}constructor(t,e={}){if(Object.defineProperty(this,"request",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"abortController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_retryCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._input=t,this._options={credentials:this._input.credentials||"same-origin",...e,headers:E(this._input.headers,e.headers),hooks:g({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},e.hooks),method:M(e.method??this._input.method),prefixUrl:String(e.prefixUrl||""),retry:H(e.retry),throwHttpErrors:e.throwHttpErrors!==!1,timeout:typeof e.timeout>"u"?1e4:e.timeout,fetch:e.fetch??globalThis.fetch.bind(globalThis)},typeof this._input!="string"&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&typeof this._input=="string"){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(L){if(this.abortController=new globalThis.AbortController,this._options.signal){const r=this._options.signal;this._options.signal.addEventListener("abort",()=>{this.abortController.abort(r.reason)})}this._options.signal=this.abortController.signal}if(I&&(this._options.duplex="half"),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const o="?"+(typeof this._options.searchParams=="string"?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),n=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,o);(N&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)&&!(this._options.headers&&this._options.headers["content-type"])&&this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(n,{...this.request}),this._options)}this._options.json!==void 0&&(this._options.body=JSON.stringify(this._options.json),this.request.headers.set("content-type",this._options.headers.get("content-type")??"application/json"),this.request=new globalThis.Request(this.request,{body:this._options.body}))}_calculateRetryDelay(t){if(this._retryCount++,this._retryCount<this._options.retry.limit&&!(t instanceof C)){if(t instanceof q){if(!this._options.retry.statusCodes.includes(t.response.status))return 0;const r=t.response.headers.get("Retry-After");if(r&&this._options.retry.afterStatusCodes.includes(t.response.status)){let o=Number(r);return Number.isNaN(o)?o=Date.parse(r)-Date.now():o*=1e3,typeof this._options.retry.maxRetryAfter<"u"&&o>this._options.retry.maxRetryAfter?0:o}if(t.response.status===413)return 0}const e=.3;return Math.min(this._options.retry.backoffLimit,e*2**(this._retryCount-1)*1e3)}return 0}_decorateResponse(t){return this._options.parseJson&&(t.json=async()=>this._options.parseJson(await t.text())),t}async _retry(t){try{return await t()}catch(e){const r=Math.min(this._calculateRetryDelay(e),_);if(r!==0&&this._retryCount>0){await z(r,{signal:this._options.signal});for(const o of this._options.hooks.beforeRetry)if(await o({request:this.request,options:this._options,error:e,retryCount:this._retryCount})===k)return;return this._retry(t)}throw e}}async _fetch(){for(const t of this._options.hooks.beforeRequest){const e=await t(this.request,this._options);if(e instanceof Request){this.request=e;break}if(e instanceof Response)return e}return this._options.timeout===!1?this._options.fetch(this.request.clone()):$(this.request.clone(),this.abortController,this._options)}_stream(t,e){const r=Number(t.headers.get("content-length"))||0;let o=0;return t.status===204?(e&&e({percent:1,totalBytes:r,transferredBytes:o},new Uint8Array),new globalThis.Response(null,{status:t.status,statusText:t.statusText,headers:t.headers})):new globalThis.Response(new globalThis.ReadableStream({async start(n){const a=t.body.getReader();e&&e({percent:0,transferredBytes:0,totalBytes:r},new Uint8Array);async function i(){const{done:u,value:h}=await a.read();if(u){n.close();return}if(e){o+=h.byteLength;const c=r===0?0:o/r;e({percent:c,transferredBytes:o,totalBytes:r},h)}n.enqueue(h),await i()}await i()}}),{status:t.status,statusText:t.statusText,headers:t.headers})}}/*! MIT License Â© Sindre Sorhus */const w=s=>{const t=(e,r)=>d.create(e,f(s,r));for(const e of S)t[e]=(r,o)=>d.create(r,f(s,o,{method:e}));return t.create=e=>w(f(e)),t.extend=e=>w(f(s,e)),t.stop=k,t},V=w(),W=V,Y=W.extend({prefixUrl:"/api/"});function K(){const s=b([]),t=b(!1),e=b([]);return{data:s,isLoading:t,error:e,getApi:async o=>{t.value=!0;try{const n=await Y.get(o).json();s.value=n.data,t.value=!1}catch(n){e.value=n.response.data}}}}const G=A("h1",null,"Categories",-1),tt={__name:"CategoriesIndex",setup(s){const{data:t,isLoading:e,errors:r,getApi:o}=K();return O(()=>{o("categories")}),(n,a)=>(y(),m(T,null,[G,A("div",{onIf:a[0]||(a[0]=(...i)=>l(t)&&l(t)(...i))},[(y(!0),m(T,null,j(l(t),i=>(y(),m("div",{key:i.id},R(i.title.en)+" "+R(l(e)),1))),128))],32)],64))}};export{tt as default};
